# é…ç½®æ–‡ä»¶å®Œå…¨æŒ‡å—

æœ¬æ–‡æ¡£è¯¦ç»†è¯´æ˜å¦‚ä½•é€šè¿‡é…ç½®æ–‡ä»¶æ§åˆ¶ç³»ç»Ÿçš„ç­–ç•¥å’Œæ ‡çš„ã€‚

---

## ğŸ“‹ ç›®å½•

1. [ç­–ç•¥é…ç½®](#ç­–ç•¥é…ç½®)
2. [æ ‡çš„é…ç½®](#æ ‡çš„é…ç½®)
3. [å¸¸è§åœºæ™¯](#å¸¸è§åœºæ™¯)
4. [æœ€ä½³å®è·µ](#æœ€ä½³å®è·µ)
5. [æ•…éšœæ’æŸ¥](#æ•…éšœæ’æŸ¥)

---

## ğŸ¯ ç­–ç•¥é…ç½®

### é…ç½®æ–‡ä»¶ä½ç½®

`config/strategies.json`

### é…ç½®æ ¼å¼

```json
{
  "strategies": [
    {
      "name": "Strategy Name",
      "display_name": "æ˜¾ç¤ºåç§°",
      "module": "core.strategies.module_name",
      "class_name": "ClassName",
      "enabled": true
    }
  ]
}
```

### å­—æ®µè¯´æ˜

| å­—æ®µ           | ç±»å‹    | å¿…å¡« | è¯´æ˜                 |
| -------------- | ------- | ---- | -------------------- |
| `name`         | string  | âœ…   | ç­–ç•¥å†…éƒ¨åç§°ï¼ˆè‹±æ–‡ï¼‰ |
| `display_name` | string  | âœ…   | é¡µé¢æ˜¾ç¤ºåç§°ï¼ˆä¸­æ–‡ï¼‰ |
| `module`       | string  | âœ…   | ç­–ç•¥æ¨¡å—è·¯å¾„         |
| `class_name`   | string  | âœ…   | ç­–ç•¥ç±»å             |
| `enabled`      | boolean | âœ…   | æ˜¯å¦å¯ç”¨             |

### ç¤ºä¾‹ï¼šç¦ç”¨ç­–ç•¥

```json
{
  "name": "Mean Reversion (RSI)",
  "display_name": "å‡å€¼å›å½’ç­–ç•¥",
  "module": "core.strategies.mean_reversion",
  "class_name": "MeanReversionStrategy",
  "enabled": false // ğŸ‘ˆ è®¾ç½®ä¸º false ç¦ç”¨
}
```

ğŸ“– [ç­–ç•¥é…ç½®ç¤ºä¾‹.md](ç­–ç•¥é…ç½®ç¤ºä¾‹.md)

---

## ğŸ·ï¸ æ ‡çš„é…ç½®

### é…ç½®æ–‡ä»¶ä½ç½®

`config/tickers.json`

### é…ç½®æ ¼å¼

```json
{
  "tickers": [
    {
      "symbol": "SPY",
      "display_name": "SPY (æ ‡æ™®500)",
      "enabled": true
    }
  ]
}
```

### å­—æ®µè¯´æ˜

| å­—æ®µ           | ç±»å‹    | å¿…å¡« | è¯´æ˜                   |
| -------------- | ------- | ---- | ---------------------- |
| `symbol`       | string  | âœ…   | Yahoo Finance æ ‡çš„ä»£ç  |
| `display_name` | string  | âœ…   | é¡µé¢æ˜¾ç¤ºåç§°           |
| `enabled`      | boolean | âœ…   | æ˜¯å¦å¯ç”¨               |

### ç¤ºä¾‹ï¼šç¦ç”¨æ ‡çš„

```json
{
  "symbol": "3033.HK",
  "display_name": "3033.HK (æ’ç”Ÿç§‘æŠ€)",
  "enabled": false // ğŸ‘ˆ è®¾ç½®ä¸º false éšè—
}
```

ğŸ“– è¯¦ç»†æ–‡æ¡£ï¼š[æ ‡çš„é…ç½®.md](æ ‡çš„é…ç½®.md)

---

## ğŸ’¡ å¸¸è§åœºæ™¯

### åœºæ™¯ 1ï¼šåªæ˜¾ç¤ºå¸¸ç”¨ç­–ç•¥

```json
// config/strategies.json
{
  "strategies": [
    {
      "name": "Daily DCA",
      "enabled": true // âœ… æ˜¾ç¤º
    },
    {
      "name": "MA200 Trend",
      "enabled": true // âœ… æ˜¾ç¤º
    },
    {
      "name": "Pyramid Grid",
      "enabled": false // âŒ éšè—
    }
  ]
}
```

### åœºæ™¯ 2ï¼šåªæ˜¾ç¤º A è‚¡æ ‡çš„

```json
// config/tickers.json
{
  "tickers": [
    {
      "symbol": "SPY",
      "enabled": false // éšè—ç¾è‚¡
    },
    {
      "symbol": "510300.SS",
      "enabled": true // âœ… æ˜¾ç¤ºAè‚¡
    },
    {
      "symbol": "516350.SS",
      "enabled": true // âœ… æ˜¾ç¤ºAè‚¡
    }
  ]
}
```

### åœºæ™¯ 3ï¼šæµ‹è¯•æ–°ç­–ç•¥

å¼€å‘æ–°ç­–ç•¥æ—¶ï¼Œå…ˆç¦ç”¨ï¼š

```json
{
  "name": "Experimental Strategy",
  "display_name": "å®éªŒæ€§ç­–ç•¥",
  "module": "core.strategies.experimental",
  "class_name": "ExperimentalStrategy",
  "enabled": false // ğŸ‘ˆ æµ‹è¯•æœŸé—´ç¦ç”¨
}
```

æµ‹è¯•é€šè¿‡åï¼Œå†å¯ç”¨ï¼š

```json
{
  "enabled": true // ğŸ‘ˆ å¯ç”¨
}
```

### åœºæ™¯ 4ï¼šæ·»åŠ æ–°æ ‡çš„

```json
{
  "tickers": [
    // ç°æœ‰æ ‡çš„...
    {
      "symbol": "AAPL",
      "display_name": "AAPL (è‹¹æœå…¬å¸)",
      "enabled": true // ğŸ‘ˆ æ–°å¢æ ‡çš„
    }
  ]
}
```

---

## âœ… æœ€ä½³å®è·µ

### 1. é…ç½®æ–‡ä»¶ç®¡ç†

- âœ… ä¿®æ”¹å‰å¤‡ä»½é…ç½®æ–‡ä»¶
- âœ… ä½¿ç”¨ JSON éªŒè¯å·¥å…·æ£€æŸ¥è¯­æ³•
- âœ… æ³¨æ„æœ€åä¸€é¡¹ä¸è¦åŠ é€—å·
- âœ… ä½¿ç”¨åˆé€‚çš„ç¼©è¿›ï¼ˆ2 æˆ– 4 ä¸ªç©ºæ ¼ï¼‰

### 2. å¯ç”¨/ç¦ç”¨ç­–ç•¥

- âœ… è‡³å°‘ä¿ç•™ä¸€ä¸ªç­–ç•¥ä¸ºå¯ç”¨çŠ¶æ€
- âœ… é‡è¦ç­–ç•¥ï¼ˆå¦‚ Daily DCAï¼‰å»ºè®®ä¿æŒå¯ç”¨
- âœ… æµ‹è¯•ç­–ç•¥è®¾ç½®ä¸º `enabled: false`

### 3. æ ‡çš„é€‰æ‹©

- âœ… ç¡®ä¿æ ‡çš„ä»£ç åœ¨ Yahoo Finance å¯ç”¨
- âœ… è‡³å°‘ä¿ç•™ä¸€ä¸ªæ ‡çš„ä¸ºå¯ç”¨çŠ¶æ€
- âœ… æ ¹æ®æŠ•èµ„åå¥½é€‰æ‹©åˆé€‚çš„æ ‡çš„

### 4. ç‰ˆæœ¬æ§åˆ¶

```bash
# æäº¤å‰æ£€æŸ¥é…ç½®æ–‡ä»¶
git diff config/strategies.json
git diff config/tickers.json

# æäº¤é…ç½®å˜æ›´
git add config/*.json
git commit -m "é…ç½®æ›´æ–°: ç¦ç”¨å®éªŒæ€§ç­–ç•¥"
```

---

## ğŸ” éªŒè¯é…ç½®

### éªŒè¯ç­–ç•¥é…ç½®

```bash
python tests/test_refactoring.py
```

### éªŒè¯æ ‡çš„é…ç½®

```bash
python tests/test_ticker_config.py
```

### æ‰‹åŠ¨éªŒè¯

```python
# æµ‹è¯•ç­–ç•¥åŠ è½½
from core.strategy_loader import load_strategies
strategies, names = load_strategies()
print(f"å·²åŠ è½½ {len(strategies)} ä¸ªç­–ç•¥")

# æµ‹è¯•æ ‡çš„åŠ è½½
from config.ticker_loader import load_tickers
tickers = load_tickers()
print(f"å·²åŠ è½½ {len(tickers)} ä¸ªæ ‡çš„")
```

---

## ğŸ†˜ æ•…éšœæ’æŸ¥

### é—®é¢˜ 1ï¼šé…ç½®ä¸ç”Ÿæ•ˆ

**ç—‡çŠ¶**ï¼šä¿®æ”¹é…ç½®åé¡µé¢æ²¡æœ‰å˜åŒ–

**è§£å†³æ–¹æ³•**ï¼š

1. åˆ·æ–°æµè§ˆå™¨é¡µé¢ï¼ˆCtrl+F5 å¼ºåˆ¶åˆ·æ–°ï¼‰
2. é‡å¯ Streamlit åº”ç”¨
3. æ£€æŸ¥ JSON è¯­æ³•æ˜¯å¦æ­£ç¡®
4. æŸ¥çœ‹ç»ˆç«¯æ˜¯å¦æœ‰é”™è¯¯ä¿¡æ¯

### é—®é¢˜ 2ï¼šJSON è¯­æ³•é”™è¯¯

**ç—‡çŠ¶**ï¼šåº”ç”¨å¯åŠ¨å¤±è´¥æˆ–æŠ¥é”™

**è§£å†³æ–¹æ³•**ï¼š

1. ä½¿ç”¨ JSON éªŒè¯å·¥å…·ï¼ˆå¦‚ jsonlint.comï¼‰
2. æ£€æŸ¥é€—å·ã€å¼•å·ã€æ‹¬å·æ˜¯å¦åŒ¹é…
3. æœ€åä¸€é¡¹ä¸è¦åŠ é€—å·
4. ç¡®ä¿ä½¿ç”¨è‹±æ–‡æ ‡ç‚¹ç¬¦å·

### é—®é¢˜ 3ï¼šç­–ç•¥/æ ‡çš„ä¸æ˜¾ç¤º

**ç—‡çŠ¶**ï¼šæŸä¸ªç­–ç•¥æˆ–æ ‡çš„åœ¨é¡µé¢æ‰¾ä¸åˆ°

**è§£å†³æ–¹æ³•**ï¼š

1. æ£€æŸ¥ `enabled: true`
2. è¿è¡Œæµ‹è¯•è„šæœ¬éªŒè¯
3. æ¸…é™¤æµè§ˆå™¨ç¼“å­˜
4. æ£€æŸ¥é…ç½®æ–‡ä»¶è·¯å¾„æ˜¯å¦æ­£ç¡®

### é—®é¢˜ 4ï¼šSelectbox ç´¢å¼•é”™è¯¯

**ç—‡çŠ¶**ï¼š`StreamlitAPIException: Selectbox index must be...`

**è§£å†³æ–¹æ³•**ï¼š

- è¿™ä¸ªé—®é¢˜å·²åœ¨ v2.4 ä¿®å¤
- ç¡®ä¿è‡³å°‘æœ‰ä¸€ä¸ªç­–ç•¥å¯ç”¨
- æ›´æ–°åˆ°æœ€æ–°ç‰ˆæœ¬

---

## ğŸ“– ç›¸å…³æ–‡æ¡£

| æ–‡æ¡£                                                       | æè¿°         |
| ---------------------------------------------------------- | ------------ |
| [ç­–ç•¥é…ç½®ç¤ºä¾‹.md](ç­–ç•¥é…ç½®ç¤ºä¾‹.md) | ç­–ç•¥é…ç½®ç¤ºä¾‹ |
| [æ ‡çš„é…ç½®.md](æ ‡çš„é…ç½®.md)                       | æ ‡çš„é…ç½®è¯´æ˜ |
| [å¿«é€Ÿå¼€å§‹.md](å¿«é€Ÿå¼€å§‹.md)                           | å¿«é€Ÿä¸Šæ‰‹æŒ‡å— |

---

## ğŸ“ é…ç½®æ–‡ä»¶ç¤ºä¾‹

### å®Œæ•´çš„ç­–ç•¥é…ç½®ç¤ºä¾‹

```json
{
  "strategies": [
    {
      "name": "Daily DCA",
      "display_name": "æ¯æ—¥å®šæŠ•ç­–ç•¥",
      "module": "core.strategies.daily_dca",
      "class_name": "DailyDCAStrategy",
      "enabled": true
    },
    {
      "name": "MA200 Trend",
      "display_name": "å‡çº¿è¶‹åŠ¿ç­–ç•¥",
      "module": "core.strategies.ma200_trend",
      "class_name": "MA200TrendStrategy",
      "enabled": true
    },
    {
      "name": "Experimental Strategy",
      "display_name": "å®éªŒæ€§ç­–ç•¥",
      "module": "core.strategies.experimental",
      "class_name": "ExperimentalStrategy",
      "enabled": false
    }
  ]
}
```

### å®Œæ•´çš„æ ‡çš„é…ç½®ç¤ºä¾‹

```json
{
  "tickers": [
    {
      "symbol": "SPY",
      "display_name": "SPY (æ ‡æ™®500)",
      "enabled": true
    },
    {
      "symbol": "QQQ",
      "display_name": "QQQ (çº³æŒ‡100)",
      "enabled": true
    },
    {
      "symbol": "510300.SS",
      "display_name": "510300.SS (æ²ªæ·±300)",
      "enabled": true
    }
  ]
}
```

---

**ç‰ˆæœ¬**: v2.4  
**æ›´æ–°æ—¥æœŸ**: 2025-11-28
