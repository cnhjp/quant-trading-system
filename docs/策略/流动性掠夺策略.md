# 流动性掠夺策略 (Liquidity Grab - SFP)

该策略基于Swing Failure Pattern (SFP)理论，结合MA200趋势过滤，旨在识别市场假突破后的反转机会并顺势交易。

## 策略概述

流动性掠夺策略基于 **Swing Failure Pattern (SFP)** 理论，捕捉市场假突破后的反转机会。

## 核心理念

市场主力常常会制造假突破来"扫荡"散户的止损单，然后快速反转。这个策略就是识别这种假突破并顺势而为。

## 📊 交易逻辑

### 买入信号（看涨 SFP）

1. **假跌破识别**：最低价 < 昨日最低价 (PDL)
2. **反转确认**：收盘价 > 昨日最低价
3. **趋势过滤**：收盘价 > MA200

**解释**：价格短暂跌破前日低点，但收盘时收回，说明下方有强支撑。

### 卖出信号（平仓）

1. **看跌 SFP 出现**：最高价 > 昨日最高价 (PDH)，但收盘价 < PDH
2. **趋势破坏**：收盘价 < MA200

### 风险控制

- ✅ **只做多** (Long Only) - 不做空
- ✅ **MA200 趋势过滤** - 避免在下跌趋势中抄底
- ✅ **持仓管理** - 使用 ffill 持有仓位直到明确卖出信号

## 📈 执行步骤

### 第 1 步：数据准备

```python
# 计算 PDH/PDL（昨日高点/低点）
PDH = High.shift(1)
PDL = Low.shift(1)

# 计算 MA200
MA200 = Close.rolling(200).mean()
```

### 第 2 步：识别买入机会

```python
看涨SFP = (Low < PDL) AND (Close > PDL) AND (Close > MA200)
```

### 第 3 步：识别卖出机会

```python
看跌SFP = (High > PDH) AND (Close < PDH)
趋势破坏 = Close < MA200
卖出信号 = 看跌SFP OR 趋势破坏
```

### 第 4 步：持仓管理

- 买入信号出现 → Signal = 1
- 卖出信号出现 → Signal = 0
- 无信号时 → 向前填充 (ffill)，保持前一状态

## 💡 策略优势

1. **捕捉反转** - 在假突破后快速入场
2. **趋势保护** - MA200 过滤避免逆势操作
3. **风险可控** - 只做多，明确止损点

## ⚠️ 适用场景

- ✅ **震荡市** - SFP 信号频繁出现
- ✅ **区间突破** - 最适合捕捉假突破
- ❌ **单边趋势** - 信号较少

## 📊 关键参数

| 参数     | 值     | 说明               |
| -------- | ------ | ------------------ |
| PDH/PDL  | 1 天   | 前一日高低点       |
| MA200    | 200 天 | 长期趋势指标       |
| 持仓方式 | 全仓   | 信号触发时全仓进出 |

## 🎯 预期表现

- **市场环境**: SPY/QQQ 等流动性高的指数
- **交易频率**: 中等（根据 SFP 信号）
- **胜率**: 取决于市场环境
- **风险收益比**: 通过 MA200 控制

---

**注意**：本策略仅供学习和研究，不构成投资建议。
