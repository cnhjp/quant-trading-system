# 均值回归策略 (Mean Reversion - RSI)

## 策略概述

基于 **RSI (相对强弱指数)** 的均值回归策略，在超卖时买入，配合 MA200 趋势过滤。

## 核心理念

**价格偏离均值后会回归** - 当 RSI 显示超卖且趋势向上时，是较佳的买入时机。

## 📊 交易逻辑

### 买入信号

1. **超卖识别**：RSI < 45 (优化后阈值)
2. **趋势确认**：收盘价 > MA200

**原因**：

- RSI < 45 表明短期超卖
- MA200 之上确保大趋势向上
- 结合两者，提高胜率

### 卖出信号（平仓）

1. **超买**：RSI > 70
2. **趋势破坏**：收盘价 < MA200

### 风险控制

- ✅ **只做多** (Long Only)
- ✅ **趋势过滤** - 避免逆势抄底
- ✅ **持仓管理** - 使用 ffill 持有直到卖出信号

## 📈 执行步骤

### 第 1 步：计算 RSI

```python
# 计算价格变化
Delta = Close.diff()

# 分离涨跌
Gain = Delta.where(Delta > 0, 0)
Loss = -Delta.where(Delta < 0, 0)

# 计算平均涨跌幅 (14天)
Avg_Gain = Gain.rolling(14).mean()
Avg_Loss = Loss.rolling(14).mean()

# 相对强度
RS = Avg_Gain / Avg_Loss

# RSI指标
RSI = 100 - (100 / (1 + RS))
```

### 第 2 步：计算 MA200

```python
MA200 = Close.rolling(200).mean()
```

### 第 3 步：生成交易信号

```python
买入条件 = (RSI < 45) AND (Close > MA200)
卖出条件 = (RSI > 70) OR (Close < MA200)

if 买入条件:
    Signal = 1
elif 卖出条件:
    Signal = 0
else:
    Signal = 保持前一状态 (ffill)
```

## 💡 策略优势

1. **参数优化** - RSI 阈值从传统 30 提高到 45，增加交易频率
2. **双重保护** - 趋势过滤避免在熊市抄底
3. **简单有效** - 逻辑清晰，易于理解和执行

## ⚠️ 适用场景

- ✅ **震荡上涨** - RSI 频繁进入超卖区
- ✅ **回调买入** - 在上升趋势中的回调
- ❌ **深度熊市** - 即使有趋势过滤，仍需谨慎

## 📊 关键参数

| 参数     | 值     | 说明                |
| -------- | ------ | ------------------- |
| RSI 周期 | 14 天  | 标准周期            |
| 买入阈值 | 45     | 优化后（传统为 30） |
| 卖出阈值 | 70     | 超买信号            |
| MA200    | 200 天 | 趋势过滤器          |

## 🎯 RSI 原理

RSI (Relative Strength Index) 衡量价格强弱：

```
RSI = 100 - (100 / (1 + RS))
RS = 平均涨幅 / 平均跌幅
```

**数值含义**：

- RSI > 70 → 超买，可能回调
- RSI < 30 → 超卖，可能反弹
- RSI = 50 → 多空平衡

## 🔧 参数优化说明

### 为什么选择 RSI < 45？

传统策略使用 RSI < 30，但这有问题：

1. **触发太少** - SPY/QQQ 很少跌到 RSI 30
2. **错过机会** - 很多回调在 RSI 30-45 就反弹了

我们优化为 **RSI < 45**：

- ✅ 增加交易频率
- ✅ 更早捕捉反弹
- ✅ 配合 MA200 过滤，胜率仍然可控

### MA200 的作用

- 价格 > MA200 → 长期牛市，可以抄底
- 价格 < MA200 → 长期熊市，远离市场

这避免了在 2022 年大跌时频繁抄底的损失。

## 📈 入场和出场逻辑

### 入场时机

```
RSI跌到45以下 + 价格仍在MA200之上
↓
市场短期超卖，但大趋势向上
↓
买入等待反弹
```

### 出场时机

```
场景1: RSI升到70以上 → 超买，获利了结
场景2: 价格跌破MA200 → 趋势转坏，止损离场
```

## 🎯 预期表现

- **市场环境**: 趋势向上的震荡市
- **交易频率**: 中等（RSI 45 触发频率适中）
- **胜率**: 较高（有 MA200 保护）
- **风险收益比**: 良好

## 💡 优化建议

可根据历史回测调整参数：

- **激进版**: RSI < 50 (更频繁交易)
- **保守版**: RSI < 40 (更少但更可靠)
- **趋势强化**: 使用 MA50 替代 MA200

---

**提示**：均值回归策略在单边趋势市场效果最佳，震荡市次之。
